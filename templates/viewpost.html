{% extends "base/layout.html" %}
{% block title %} {{ post.title }} {% endblock %}

{% block content %} 
    <div class="container">
        <div>
            <p><b>#{{ post.id }}</b></p>
            <b>
                <p class="title">{{ post.title }}</p>
            </b>
            <div class="content">
                <p>{{ post.content }}</p>
            </div>
            <hr>
            <h5>Comments:</h5>
            {% for comment in post.comments %}
                <div class="comment">
                    <p>#{{ comment.id }}</p>
                    <p>{{ comment.content }}</p>
                </div>
            {% endfor %}
        </div>
        <form method="post" action="/viewpost" class="mt-3">
            <div class="input-group">
                <input type="text" name="comment" class="form-control" placeholder="Add a comment" required>
                <input type="hidden" name="post_id" value="{{ post.id }}">
                <button type="submit" class="btn btn-primary">Comment</button>
            </div>
        </form>
        <li class="list-group-item d-flex justify-content-between align-items-center">
            {{ comment.content }}
            {% if session['user_id'] == comment.post.user_id %}
            <form method="post" action="{{ url_for('editcomment', comment_id=comment.id) }}" class="d-inline">
                <button type="submit" class="btn btn-danger btn-sm">Edit</button>
            </form>
            {% endif %}
        </li>
        <li class="list-group-item d-flex justify-content-between align-items-center">
            {{ comment.content }}
            {% if session['user_id'] == comment.post.user_id %}
            <form method="post" action="{{ url_for('delete_comment', comment_id=comment.id) }}" class="d-inline">
                <button type="submit" class="btn btn-danger btn-sm">Delete</button>
            </form>
            {% endif %}
        </li>
    </div>
{% endblock %}